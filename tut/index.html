<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simbela Tutoring Services</title>
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <style>
        :root {
            --primary: #4a6fa5;
            --secondary: #166088;
            --light: #f5f5f5;
            --dark: #333;
            --success: #28a745;
            --warning: #ffc107;
            --danger: #dc3545;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: var(--dark);
            margin: 0;
            padding: 0;
            background-color: var(--light);
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 1rem;
        }
        
        header {
            background-color: var(--primary);
            color: white;
            padding: 1rem 0;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }
        
        header .container {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo h1 {
            margin: 0;
            font-size: 1.8rem;
        }
        
        nav ul {
            display: flex;
            list-style: none;
            margin: 0;
            padding: 0;
        }
        
        nav ul li {
            margin-left: 1.5rem;
        }
        
        nav ul li a {
            color: white;
            text-decoration: none;
            font-weight: 500;
            transition: opacity 0.3s;
        }
        
        nav ul li a:hover {
            opacity: 0.8;
        }
        
        .section {
            padding: 2rem 0;
        }
        
        .page-section {
            display: none;
        }
        
        .page-section.active {
            display: block;
        }
        
        .hero {
            background-color: var(--secondary);
            color: white;
            text-align: center;
            padding: 3rem 0;
        }
        
        .hero h2 {
            font-size: 2.5rem;
            margin-bottom: 1rem;
        }
        
        .hero p {
            font-size: 1.2rem;
            max-width: 700px;
            margin: 0 auto 2rem;
        }
        
        .btn {
            display: inline-block;
            padding: 0.8rem 1.5rem;
            background-color: var(--primary);
            color: white;
            text-decoration: none;
            border-radius: 4px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s;
            border: none;
        }
        
        .btn:hover {
            background-color: #3a5a84;
        }
        
        .btn-light {
            background-color: white;
            color: var(--primary);
        }
        
        .btn-light:hover {
            background-color: #eaeaea;
        }
        
        .btn-danger {
            background-color: var(--danger);
        }
        
        .btn-danger:hover {
            background-color: #c82333;
        }
        
        .card {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            padding: 2rem;
            margin-bottom: 2rem;
        }
        
        .subjects {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 2rem;
        }
        
        .subject-card {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            padding: 1.5rem;
            transition: transform 0.3s;
        }
        
        .subject-card:hover {
            transform: translateY(-5px);
        }
        
        .subject-card h3 {
            color: var(--primary);
            margin-top: 0;
        }
        
        .form-group {
            margin-bottom: 1.5rem;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
        }
        
        .form-control {
            width: 100%;
            padding: 0.8rem;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 1rem;
            box-sizing: border-box;
        }
        
        .form-control:focus {
            outline: none;
            border-color: var(--primary);
        }
        
        textarea.form-control {
            min-height: 150px;
            resize: vertical;
        }
        
        .error {
            color: var(--danger);
            font-size: 0.9rem;
            margin-top: 0.5rem;
        }
        
        .success-message {
            background-color: #d4edda;
            color: #155724;
            padding: 1rem;
            border-radius: 4px;
            margin-bottom: 1.5rem;
            display: none;
        }
        
        .alert {
            padding: 1rem;
            border-radius: 4px;
            margin-bottom: 1rem;
        }
        
        .alert-danger {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        .alert-success {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        footer {
            background-color: var(--dark);
            color: white;
            padding: 2rem 0;
            text-align: center;
        }
        
        .user-info {
            display: flex;
            align-items: center;
            gap: 1rem;
        }
        
        .user-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
        }
        
        .role-badge {
            background-color: var(--warning);
            color: var(--dark);
            padding: 0.2rem 0.5rem;
            border-radius: 3px;
            font-size: 0.8rem;
            font-weight: bold;
        }
        
        .role-badge.admin {
            background-color: var(--danger);
            color: white;
        }
        
        .booking-card {
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 1rem;
            background-color: white;
        }
        
        .booking-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.5rem;
        }
        
        .booking-status {
            padding: 0.3rem 0.6rem;
            border-radius: 4px;
            font-size: 0.8rem;
            font-weight: bold;
        }
        
        .status-confirmed {
            background-color: #d4edda;
            color: #155724;
        }
        
        .status-pending {
            background-color: #fff3cd;
            color: #856404;
        }
        
        .status-cancelled {
            background-color: #f8d7da;
            color: #721c24;
        }
        
        .booking-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin: 1rem 0;
        }
        
        .detail-item {
            display: flex;
            flex-direction: column;
            gap: 0.2rem;
        }
        
        .detail-label {
            font-weight: bold;
            color: var(--secondary);
            font-size: 0.9rem;
        }
        
        .detail-value {
            color: var(--dark);
        }
        
        .google-signin-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            background-color: #4285f4;
            color: white;
            border: none;
            padding: 0.8rem 1.5rem;
            border-radius: 4px;
            cursor: pointer;
            font-size: 1rem;
            transition: background-color 0.3s;
        }
        
        .google-signin-btn:hover {
            background-color: #357ae8;
        }
        
        .booking-slots {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }
        
        .slot-card {
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 1rem;
            background-color: white;
            text-align: center;
        }
        
        .slot-card.available {
            border-color: var(--success);
            background-color: #f8fff9;
        }
        
        .slot-card.full {
            border-color: var(--danger);
            background-color: #fff8f8;
            opacity: 0.7;
        }
        
        .slot-count {
            font-size: 1.2rem;
            font-weight: bold;
            margin: 0.5rem 0;
        }
        
        .slot-count.available {
            color: var(--success);
        }
        
        .slot-count.full {
            color: var(--danger);
        }
        
        /* Responsive adjustments */
        @media (max-width: 768px) {
            header .container {
                flex-direction: column;
            }
            
            nav ul {
                margin-top: 1rem;
            }
            
            nav ul li {
                margin: 0 0.5rem;
            }
            
            .subjects, .booking-slots {
                grid-template-columns: 1fr;
            }
            
            .booking-details {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container">
            <div class="logo">
                <h1>Simbela Tutoring Services</h1>
            </div>
            <nav>
                <ul>
                    <li><a href="#" data-section="home">Home</a></li>
                    <li><a href="#" data-section="services">Services</a></li>
                    <li><a href="#" data-section="pricing">Pricing</a></li>
                    <li><a href="#" data-section="contact">Contact</a></li>
                    <li id="login-nav"><a href="#" data-section="login">Login</a></li>
                    <li id="dashboard-nav" style="display: none;"><a href="#" data-section="dashboard">Dashboard</a></li>
                    <li id="bookings-nav" style="display: none;"><a href="#" data-section="bookings">Bookings</a></li>
                    <li id="admin-nav" style="display: none;"><a href="#" data-section="admin">Admin</a></li>
                    <li id="user-info" style="display: none;" class="user-info">
                        <img id="user-avatar" class="user-avatar" src="" alt="User Avatar">
                        <span id="user-name"></span>
                        <span id="user-role" class="role-badge"></span>
                        <button id="logout-btn" class="btn btn-danger" style="padding: 0.4rem 0.8rem; font-size: 0.8rem;">Logout</button>
                    </li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- Login Section -->
    <section id="login-section" class="section page-section">
        <div class="container">
            <div class="card">
                <h2>Login to Your Account</h2>
                <p>Sign in with your Google account to access your tutoring dashboard.</p>
                
                <div id="google-signin-container">
                    <button id="google-signin-btn" class="google-signin-btn">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" fill="#4285F4"/>
                            <path d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" fill="#34A853"/>
                            <path d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" fill="#FBBC05"/>
                            <path d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" fill="#EA4335"/>
                        </svg>
                        Sign in with Google
                    </button>
                </div>
                
                <div class="success-message" id="login-success">
                    Successfully signed in! Redirecting to dashboard...
                </div>
                
                <div id="login-error" class="alert alert-danger" style="display: none;">
                    Login failed. Please try again.
                </div>
            </div>
        </div>
    </section>

    <!-- Dashboard Section -->
    <section id="dashboard-section" class="section page-section">
        <div class="container">
            <div class="card">
                <h2>Welcome to Your Dashboard</h2>
                <p>Hello <span id="dashboard-user-name">Student</span>! Here you can manage your tutoring sessions, access resources, and get help.</p>
                
                <div class="card">
                    <h3>Your Recent Bookings</h3>
                    <div id="user-bookings">
                        <p>You have no bookings yet.</p>
                    </div>
                    <button class="btn" id="book-session-btn">Book a New Session</button>
                </div>
                
                <div class="card">
                    <h3>Your Learning Resources</h3>
                    <ul>
                        <li><a href="#">Math Practice Problems</a></li>
                        <li><a href="#">Science Study Guide</a></li>
                        <li><a href="#">English Grammar Review</a></li>
                        <li><a href="#">History Timeline Reference</a></li>
                    </ul>
                </div>
                
                <div class="card">
                    <h3>Need Help?</h3>
                    <p>Ask your tutor a question or request assistance with a specific topic.</p>
                    <form id="help-form">
                        <div class="form-group">
                            <label for="help-subject">Subject</label>
                            <select id="help-subject" class="form-control" required>
                                <option value="">Select a subject</option>
                                <option value="math">Mathematics</option>
                                <option value="science">Science</option>
                                <option value="english">English</option>
                                <option value="history">History</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="help-message">Your Question</label>
                            <textarea id="help-message" class="form-control" required></textarea>
                        </div>
                        
                        <button type="submit" class="btn">Submit Question</button>
                    </form>
                    
                    <div class="success-message" id="help-success">
                        Your question has been submitted! Your tutor will respond shortly.
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Bookings Section -->
    <section id="bookings-section" class="section page-section">
        <div class="container">
            <div class="card">
                <h2>Book a Tutoring Session</h2>
                <p>Select your preferred subject, date, and time slot for your tutoring session.</p>
                
                <form id="booking-form">
                    <div class="form-group">
                        <label for="booking-subject">Subject</label>
                        <select id="booking-subject" class="form-control" required>
                            <option value="">Select a subject</option>
                            <option value="mathematics">Mathematics</option>
                            <option value="science">Science</option>
                            <option value="english">English</option>
                            <option value="history">History</option>
                            <option value="test-prep">Test Preparation</option>
                            <option value="study-skills">Study Skills</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="booking-date">Preferred Date</label>
                        <input type="date" id="booking-date" class="form-control" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="booking-time">Preferred Time</label>
                        <select id="booking-time" class="form-control" required>
                            <option value="">Select a time slot</option>
                            <option value="09:00">9:00 AM</option>
                            <option value="10:00">10:00 AM</option>
                            <option value="11:00">11:00 AM</option>
                            <option value="14:00">2:00 PM</option>
                            <option value="15:00">3:00 PM</option>
                            <option value="16:00">4:00 PM</option>
                            <option value="17:00">5:00 PM</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="booking-notes">Additional Notes (Optional)</label>
                        <textarea id="booking-notes" class="form-control" placeholder="Any specific topics or areas you'd like to focus on..."></textarea>
                    </div>
                    
                    <button type="submit" class="btn">Book Session</button>
                </form>
                
                <div class="success-message" id="booking-success">
                    Your session has been booked successfully! You'll receive a confirmation email shortly.
                </div>
                
                <div id="booking-error" class="alert alert-danger" style="display: none;">
                    Sorry, this time slot is fully booked (40/40 students). Please select a different time.
                </div>
            </div>
            
            <div class="card">
                <h3>Current Slot Availability</h3>
                <p>View current booking status for today's sessions</p>
                <div id="slot-availability" class="booking-slots">
                    <!-- Slot availability will be populated by JavaScript -->
                </div>
            </div>
        </div>
    </section>

    <!-- Admin Section -->
    <section id="admin-section" class="section page-section">
        <div class="container">
            <div class="card">
                <h2>Admin Dashboard</h2>
                <p>Manage all bookings and view system statistics.</p>
                
                <div class="card">
                    <h3>Booking Statistics</h3>
                    <div id="booking-stats">
                        <p>Loading statistics...</p>
                    </div>
                </div>
                
                <div class="card">
                    <h3>All Bookings</h3>
                    <div class="form-group">
                        <label for="filter-date">Filter by Date</label>
                        <input type="date" id="filter-date" class="form-control">
                    </div>
                    <div class="form-group">
                        <label for="filter-subject">Filter by Subject</label>
                        <select id="filter-subject" class="form-control">
                            <option value="">All Subjects</option>
                            <option value="mathematics">Mathematics</option>
                            <option value="science">Science</option>
                            <option value="english">English</option>
                            <option value="history">History</option>
                            <option value="test-prep">Test Preparation</option>
                            <option value="study-skills">Study Skills</option>
                        </select>
                    </div>
                    <div id="all-bookings">
                        <p>Loading bookings...</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Home Section -->
    <section id="home-section" class="section page-section active">
        <div class="hero">
            <div class="container">
                <h2>Expert Tutoring for Academic Success</h2>
                <p>Personalized one-on-one tutoring to help you achieve your academic goals and build confidence in your studies.</p>
                <a href="#" class="btn btn-light" data-section="services">Explore Our Services</a>
            </div>
        </div>
        
        <div class="container section">
            <h2>Why Choose Our Tutoring Services?</h2>
            <div class="subjects">
                <div class="subject-card">
                    <h3>Personalized Approach</h3>
                    <p>We tailor our teaching methods to match your learning style and academic needs, ensuring effective and efficient progress.</p>
                </div>
                <div class="subject-card">
                    <h3>Experienced Tutors</h3>
                    <p>Our tutors are subject matter experts with years of teaching experience and a passion for helping students succeed.</p>
                </div>
                <div class="subject-card">
                    <h3>Flexible Scheduling</h3>
                    <p>Book sessions at times that work for you, with options for both regular weekly sessions and on-demand help.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Services Section -->
    <section id="services-section" class="section page-section">
        <div class="container">
            <h2>Our Tutoring Services</h2>
            <p>We offer comprehensive tutoring across a wide range of subjects and academic levels.</p>
            
            <div class="subjects">
                <div class="subject-card">
                    <h3>Mathematics</h3>
                    <p>From basic arithmetic to advanced calculus, our math tutors can help with:</p>
                    <ul>
                        <li>Algebra & Geometry</li>
                        <li>Trigonometry</li>
                        <li>Calculus & Statistics</li>
                        <li>Standardized Test Prep</li>
                    </ul>
                </div>
                <div class="subject-card">
                    <h3>Science</h3>
                    <p>Comprehensive science tutoring in:</p>
                    <ul>
                        <li>Biology & Chemistry</li>
                        <li>Physics</li>
                        <li>Earth Science</li>
                        <li>Lab Report Assistance</li>
                    </ul>
                </div>
                <div class="subject-card">
                    <h3>English & Language Arts</h3>
                    <p>Develop your language and writing skills with help in:</p>
                    <ul>
                        <li>Reading Comprehension</li>
                        <li>Essay Writing</li>
                        <li>Grammar & Vocabulary</li>
                        <li>Literature Analysis</li>
                    </ul>
                </div>
                <div class="subject-card">
                    <h3>History & Social Studies</h3>
                    <p>Expert tutoring in:</p>
                    <ul>
                        <li>World History</li>
                        <li>U.S. History</li>
                        <li>Government & Economics</li>
                        <li>Research Paper Support</li>
                    </ul>
                </div>
            </div>
        </div>
    </section>

    <!-- Pricing Section -->
    <section id="pricing-section" class="section page-section">
        <div class="container">
            <h2>Tutoring Packages & Pricing</h2>
            <p>Choose the tutoring package that best fits your academic needs and goals.</p>
            
            <div class="subjects">
                <div class="subject-card">
                    <h3>Basic</h3>
                    <div style="font-size: 2rem; font-weight: bold; color: var(--primary); margin: 1rem 0;">R40.00 <span style="font-size: 1rem;">/ hour</span></div>
                    <ul>
                        <li>One-on-one tutoring sessions</li>
                        <li>Subject-specific help</li>
                        <li>Homework assistance</li>
                        <li>Basic progress tracking</li>
                        <li>Pay as you go</li>
                    </ul>
                    <a href="#" class="btn" data-section="contact">Get Started</a>
                </div>
                
                <div class="subject-card">
                    <h3>Standard</h3>
                    <div style="font-size: 2rem; font-weight: bold; color: var(--primary); margin: 1rem 0;">R35.00 <span style="font-size: 1rem;">/ hour</span></div>
                    <ul>
                        <li>4 sessions per month</li>
                        <li>Customized learning plan</li>
                        <li>Digital resources library</li>
                        <li>Email support between sessions</li>
                        <li>Monthly progress reports</li>
                    </ul>
                    <a href="#" class="btn" data-section="contact">Get Started</a>
                </div>
                
                <div class="subject-card">
                    <h3>Premium</h3>
                    <div style="font-size: 2rem; font-weight: bold; color: var(--primary); margin: 1rem 0;">R30.00 <span style="font-size: 1rem;">/ hour</span></div>
                    <ul>
                        <li>8 sessions per month</li>
                        <li>Comprehensive learning plan</li>
                        <li>Priority scheduling</li>
                        <li>24/7 question support</li>
                        <li>Practice tests & materials</li>
                        <li>Detailed progress analytics</li>
                    </ul>
                    <a href="#" class="btn" data-section="contact">Get Started</a>
                </div>
            </div>
        </div>
    </section>

    <!-- Contact Section -->
    <section id="contact-section" class="section page-section">
        <div class="container">
            <h2>Contact Us</h2>
            <p>Have questions or ready to get started? Reach out to us using the form below.</p>
            
            <div class="card">
                <form id="contact-form">
                    <div class="form-group">
                        <label for="name">Your Name</label>
                        <input type="text" id="name" class="form-control" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="contact-email">Email Address</label>
                        <input type="email" id="contact-email" class="form-control" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="phone">Phone Number (Optional)</label>
                        <input type="tel" id="phone" class="form-control">
                    </div>
                    
                    <div class="form-group">
                        <label for="subject">Subject of Interest</label>
                        <select id="subject" class="form-control" required>
                            <option value="">Select a subject</option>
                            <option value="math">Mathematics</option>
                            <option value="science">Science</option>
                            <option value="english">English</option>
                            <option value="history">History</option>
                            <option value="test-prep">Test Prep</option>
                            <option value="study-skills">Study Skills</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="message">Your Message</label>
                        <textarea id="message" class="form-control" required></textarea>
                    </div>
                    
                    <button type="submit" class="btn">Send Message</button>
                </form>
                
                <div class="success-message" id="contact-success">
                    Thank you for your message! We'll get back to you within 24 hours.
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="container">
            <p>&copy; <span id="current-year"></span> Simbela Tutoring Services. All rights reserved.</p>
        </div>
    </footer>
    <script>
   // Set current year in footer
   document.getElementById('current-year').textContent = new Date().getFullYear();
   
   // Mock database for storing bookings and users
   let bookings = JSON.parse(localStorage.getItem('tutoring_bookings') || '[]');
   let users = JSON.parse(localStorage.getItem('tutoring_users') || '[]');
   let currentUser = null;

   // Maximum students per time slot
   const MAX_STUDENTS_PER_SLOT = 40;

   // Initialize the application
   document.addEventListener('DOMContentLoaded', function() {
       const navLinks = document.querySelectorAll('nav a');
       const sections = document.querySelectorAll('.page-section');
       
       // Handle navigation clicks
       navLinks.forEach(link => {
           link.addEventListener('click', function(e) {
               e.preventDefault();
               const targetSection = this.getAttribute('data-section');
               
               if (targetSection) {
                   // Hide all sections
                   sections.forEach(section => {
                       section.classList.remove('active');
                   });
                   
                   // Show target section
                   const targetElement = document.getElementById(`${targetSection}-section`);
                   if (targetElement) {
                       targetElement.classList.add('active');
                   }
               }
           });
       });
       
       // Also handle buttons that navigate to sections
       document.querySelectorAll('.btn[data-section]').forEach(btn => {
           btn.addEventListener('click', function(e) {
               e.preventDefault();
               const targetSection = this.getAttribute('data-section');
               
               if (targetSection) {
                   // Hide all sections
                   sections.forEach(section => {
                       section.classList.remove('active');
                   });
                   
                   // Show target section
                   const targetElement = document.getElementById(`${targetSection}-section`);
                   if (targetElement) {
                       targetElement.classList.add('active');
                   }
               }
           });
       });

       // Google Sign-In setup
       setupGoogleSignIn();
       
       // Check if user is already logged in
       checkLoginState();
       
       // Setup form handlers
       setupFormHandlers();
       
       // Load slot availability
       updateSlotAvailability();
       
       // Setup admin functions if user is admin
       if (currentUser && currentUser.role === 'admin') {
           loadAdminData();
       }
   });

   // Google Sign-In setup
   function setupGoogleSignIn() {
       const googleSignInBtn = document.getElementById('google-signin-btn');
       if (googleSignInBtn) {
           googleSignInBtn.addEventListener('click', function() {
               // Simulate Google Sign-In for demo purposes
               // In a real implementation, you would use the Google Sign-In API
               simulateGoogleSignIn();
           });
       }
   }

   // Simulate Google Sign-In (for demo purposes)
   function simulateGoogleSignIn() {
       // This is a simulation - in real implementation, use Google's API
       const mockGoogleUser = {
           id: 'google_' + Date.now(),
           email: 'user@example.com',
           name: 'John Doe',
           picture: '/api/placeholder/32/32',
           role: 'user', // Default role
           verified: true,
           loginTime: new Date().toISOString()
       };

       // Check if this is the first user (make them admin)
       if (users.length === 0) {
           mockGoogleUser.role = 'admin';
           mockGoogleUser.email = 'admin@simbela.com';
           mockGoogleUser.name = 'Administrator';
       }

       // Check if user already exists
       let existingUser = users.find(u => u.email === mockGoogleUser.email);
       if (!existingUser) {
           users.push(mockGoogleUser);
           localStorage.setItem('tutoring_users', JSON.stringify(users));
       } else {
           existingUser.loginTime = new Date().toISOString();
       }

       currentUser = existingUser || mockGoogleUser;
       localStorage.setItem('current_user', JSON.stringify(currentUser));

       // Show success message and redirect
       document.getElementById('login-success').style.display = 'block';
       setTimeout(() => {
           updateLoginState();
           navigateToSection('dashboard');
       }, 1500);
   }

   // Check login state on page load
   function checkLoginState() {
       const savedUser = localStorage.getItem('current_user');
       if (savedUser) {
           currentUser = JSON.parse(savedUser);
           updateLoginState();
       }
   }

   // Update UI based on login state
   function updateLoginState() {
       if (currentUser) {
           // Hide login nav, show user info
           document.getElementById('login-nav').style.display = 'none';
           document.getElementById('dashboard-nav').style.display = 'block';
           document.getElementById('bookings-nav').style.display = 'block';
           document.getElementById('user-info').style.display = 'flex';

           // Show admin nav if user is admin
           if (currentUser.role === 'admin') {
               document.getElementById('admin-nav').style.display = 'block';
           }

           // Update user info display
           document.getElementById('user-avatar').src = currentUser.picture || '/api/placeholder/32/32';
           document.getElementById('user-name').textContent = currentUser.name;
           document.getElementById('user-role').textContent = currentUser.role.toUpperCase();
           document.getElementById('user-role').className = `role-badge ${currentUser.role}`;
           document.getElementById('dashboard-user-name').textContent = currentUser.name;

           // Load user-specific data
           loadUserBookings();
           if (currentUser.role === 'admin') {
               loadAdminData();
           }
       } else {
           // Show login nav, hide user-specific elements
           document.getElementById('login-nav').style.display = 'block';
           document.getElementById('dashboard-nav').style.display = 'none';
           document.getElementById('bookings-nav').style.display = 'none';
           document.getElementById('admin-nav').style.display = 'none';
           document.getElementById('user-info').style.display = 'none';
       }
   }

   // Navigate to a specific section
   function navigateToSection(sectionName) {
       document.querySelectorAll('.page-section').forEach(section => {
           section.classList.remove('active');
       });
       
       const targetSection = document.getElementById(`${sectionName}-section`);
       if (targetSection) {
           targetSection.classList.add('active');
       }
   }

   // Setup form handlers
   function setupFormHandlers() {
       // Contact form
       const contactForm = document.getElementById('contact-form');
       if (contactForm) {
           contactForm.addEventListener('submit', function(e) {
               e.preventDefault();
               document.getElementById('contact-success').style.display = 'block';
               contactForm.reset();
           });
       }

       // Help form
       const helpForm = document.getElementById('help-form');
       if (helpForm) {
           helpForm.addEventListener('submit', function(e) {
               e.preventDefault();
               document.getElementById('help-success').style.display = 'block';
               helpForm.reset();
           });
       }

       // Booking form
       const bookingForm = document.getElementById('booking-form');
       if (bookingForm) {
           bookingForm.addEventListener('submit', handleBookingSubmission);
       }

       // Book session button
       const bookSessionBtn = document.getElementById('book-session-btn');
       if (bookSessionBtn) {
           bookSessionBtn.addEventListener('click', function() {
               navigateToSection('bookings');
           });
       }

       // Logout button
       const logoutBtn = document.getElementById('logout-btn');
       if (logoutBtn) {
           logoutBtn.addEventListener('click', handleLogout);
       }

       // Admin filters
       const filterDate = document.getElementById('filter-date');
       const filterSubject = document.getElementById('filter-subject');
       if (filterDate) {
           filterDate.addEventListener('change', loadAdminBookings);
       }
       if (filterSubject) {
           filterSubject.addEventListener('change', loadAdminBookings);
       }
   }

   // Handle booking submission
   function handleBookingSubmission(e) {
       e.preventDefault();
       
       if (!currentUser) {
           alert('Please log in to book a session.');
           return;
       }

       const subject = document.getElementById('booking-subject').value;
       const date = document.getElementById('booking-date').value;
       const time = document.getElementById('booking-time').value;
       const notes = document.getElementById('booking-notes').value;

       // Check slot availability
       const slotKey = `${subject}-${date}-${time}`;
       const existingBookings = bookings.filter(b => 
           b.subject === subject && 
           b.date === date && 
           b.time === time && 
           b.status !== 'cancelled'
       );

       if (existingBookings.length >= MAX_STUDENTS_PER_SLOT) {
           document.getElementById('booking-error').style.display = 'block';
           document.getElementById('booking-success').style.display = 'none';
           return;
       }

       // Create booking
       const booking = {
           id: 'booking_' + Date.now(),
           userId: currentUser.id,
           userEmail: currentUser.email,
           userName: currentUser.name,
           subject: subject,
           date: date,
           time: time,
           notes: notes,
           status: 'confirmed',
           createdAt: new Date().toISOString()
       };

       bookings.push(booking);
       localStorage.setItem('tutoring_bookings', JSON.stringify(bookings));

       // Show success message
       document.getElementById('booking-error').style.display = 'none';
       document.getElementById('booking-success').style.display = 'block';
       document.getElementById('booking-form').reset();

       // Update displays
       loadUserBookings();
       updateSlotAvailability();
       
       if (currentUser.role === 'admin') {
           loadAdminData();
       }
   }

   // Load user's bookings
   function loadUserBookings() {
       if (!currentUser) return;

       const userBookings = bookings.filter(b => b.userId === currentUser.id);
       const container = document.getElementById('user-bookings');
       
       if (userBookings.length === 0) {
           container.innerHTML = '<p>You have no bookings yet.</p>';
           return;
       }

       container.innerHTML = userBookings.map(booking => `
           <div class="booking-card">
               <div class="booking-header">
                   <h4>${booking.subject.charAt(0).toUpperCase() + booking.subject.slice(1)}</h4>
                   <span class="booking-status status-${booking.status}">${booking.status.toUpperCase()}</span>
               </div>
               <div class="booking-details">
                   <div class="detail-item">
                       <span class="detail-label">Date</span>
                       <span class="detail-value">${new Date(booking.date).toLocaleDateString()}</span>
                   </div>
                   <div class="detail-item">
                       <span class="detail-label">Time</span>
                       <span class="detail-value">${booking.time}</span>
                   </div>
                   <div class="detail-item">
                       <span class="detail-label">Status</span>
                       <span class="detail-value">${booking.status}</span>
                   </div>
               </div>
               ${booking.notes ? `<p><strong>Notes:</strong> ${booking.notes}</p>` : ''}
           </div>
       `).join('');
   }

   // Update slot availability display
   function updateSlotAvailability() {
       const container = document.getElementById('slot-availability');
       if (!container) return;

       const today = new Date().toISOString().split('T')[0];
       const timeSlots = ['09:00', '10:00', '11:00', '14:00', '15:00', '16:00', '17:00'];
       const subjects = ['mathematics', 'science', 'english', 'history', 'test-prep', 'study-skills'];

       let slotsHtml = '';
       
       subjects.forEach(subject => {
           timeSlots.forEach(time => {
               const bookedCount = bookings.filter(b => 
                   b.subject === subject && 
                   b.date === today && 
                   b.time === time && 
                   b.status !== 'cancelled'
               ).length;

               const isAvailable = bookedCount < MAX_STUDENTS_PER_SLOT;
               const remaining = MAX_STUDENTS_PER_SLOT - bookedCount;

               slotsHtml += `
                   <div class="slot-card ${isAvailable ? 'available' : 'full'}">
                       <h4>${subject.charAt(0).toUpperCase() + subject.slice(1)}</h4>
                       <p>${time}</p>
                       <div class="slot-count ${isAvailable ? 'available' : 'full'}">
                           ${bookedCount}/${MAX_STUDENTS_PER_SLOT}
                       </div>
                       <p>${isAvailable ? `${remaining} spots left` : 'Fully Booked'}</p>
                   </div>
               `;
           });
       });

       container.innerHTML = slotsHtml;
   }

   // Load admin data
   function loadAdminData() {
       if (!currentUser || currentUser.role !== 'admin') return;

       loadAdminStats();
       loadAdminBookings();
   }

   // Load admin statistics
   function loadAdminStats() {
       const container = document.getElementById('booking-stats');
       if (!container) return;

       const totalBookings = bookings.length;
       const confirmedBookings = bookings.filter(b => b.status === 'confirmed').length;
       const todaysBookings = bookings.filter(b => 
           b.date === new Date().toISOString().split('T')[0]
       ).length;

       const subjectStats = {};
       bookings.forEach(b => {
           subjectStats[b.subject] = (subjectStats[b.subject] || 0) + 1;
       });

       container.innerHTML = `
           <div class="booking-details">
               <div class="detail-item">
                   <span class="detail-label">Total Bookings</span>
                   <span class="detail-value">${totalBookings}</span>
               </div>
               <div class="detail-item">
                   <span class="detail-label">Confirmed Bookings</span>
                   <span class="detail-value">${confirmedBookings}</span>
               </div>
               <div class="detail-item">
                   <span class="detail-label">Today's Bookings</span>
                   <span class="detail-value">${todaysBookings}</span>
               </div>
               <div class="detail-item">
                   <span class="detail-label">Total Users</span>
                   <span class="detail-value">${users.length}</span>
               </div>
           </div>
           <h4>Bookings by Subject:</h4>
           <ul>
               ${Object.entries(subjectStats).map(([subject, count]) => 
                   `<li>${subject.charAt(0).toUpperCase() + subject.slice(1)}: ${count}</li>`
               ).join('')}
           </ul>
       `;
   }

   // Load admin bookings
   function loadAdminBookings() {
       const container = document.getElementById('all-bookings');
       if (!container) return;

       let filteredBookings = [...bookings];

       // Apply filters
       const dateFilter = document.getElementById('filter-date')?.value;
       const subjectFilter = document.getElementById('filter-subject')?.value;

       if (dateFilter) {
           filteredBookings = filteredBookings.filter(b => b.date === dateFilter);
       }
       if (subjectFilter) {
           filteredBookings = filteredBookings.filter(b => b.subject === subjectFilter);
       }

       if (filteredBookings.length === 0) {
           container.innerHTML = '<p>No bookings found matching the selected filters.</p>';
           return;
       }

       // Sort by date and time
       filteredBookings.sort((a, b) => {
           const dateA = new Date(a.date + 'T' + a.time);
           const dateB = new Date(b.date + 'T' + b.time);
           return dateB - dateA;
       });

       container.innerHTML = filteredBookings.map(booking => `
           <div class="booking-card">
               <div class="booking-header">
                   <h4>${booking.subject.charAt(0).toUpperCase() + booking.subject.slice(1)}</h4>
                   <span class="booking-status status-${booking.status}">${booking.status.toUpperCase()}</span>
               </div>
               <div class="booking-details">
                   <div class="detail-item">
                       <span class="detail-label">Student</span>
                       <span class="detail-value">${booking.userName} (${booking.userEmail})</span>
                   </div>
                   <div class="detail-item">
                       <span class="detail-label">Date</span>
                       <span class="detail-value">${new Date(booking.date).toLocaleDateString()}</span>
                   </div>
                   <div class="detail-item">
                       <span class="detail-label">Time</span>
                       <span class="detail-value">${booking.time}</span>
                   </div>
                   <div class="detail-item">
                       <span class="detail-label">Booked</span>
                       <span class="detail-value">${new Date(booking.createdAt).toLocaleString()}</span>
                   </div>
               </div>
               ${booking.notes ? `<p><strong>Notes:</strong> ${booking.notes}</p>` : ''}
           </div>
       `).join('');
   }

   // Handle logout
   function handleLogout() {
       currentUser = null;
       localStorage.removeItem('current_user');
       updateLoginState();
       navigateToSection('home');
   }
</script>
</body>
</html>   
